<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IGNOU Subjects</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="main-header">
  <h1 id="programmeTitle">Subjects</h1>
  <p>Select your subject</p>
</header>

<section class="subject-section">
  <div id="subjectGrid" class="subject-grid"></div>
</section>

<script src="data.js"></script>

<script>
/* ========= READ PROGRAMME ========= */
const params = new URLSearchParams(window.location.search);
const programme = (params.get("programme") || "").trim().toUpperCase();

const title = document.getElementById("programmeTitle");
const grid = document.getElementById("subjectGrid");

/* ========= TITLE ========= */
if (!programme) {
  title.innerText = "Subjects";
  grid.innerHTML = "<p style='text-align:center'>No programme selected</p>";
  throw new Error("Programme missing");
}

title.innerText = programme + " Subjects";

/* ========= HARD SUBJECTS (PAID) ========= */
const maSubjects = [
  "English","Hindi","Urdu","Political Science","History","Sociology",
  "Psychology","Economics","Public Administration","Education",
  "Philosophy","Anthropology","Rural Development","Journalism"
];

const mscSubjects = [
  "Geography",
  "Zoology",
  "Geoinformatics",
  "MSCFSQM",
  "Applied Statistics",
  "Chemistry",
  "Environmental Science",
  "Botany",
  "MSC IDS"
];

/* ========= RENDER FUNCTION ========= */
function renderSubjects(subjects) {
  grid.innerHTML = "";
  subjects.forEach(sub => {
    const card = document.createElement("a");
    card.className = "subject-card";
    card.href =
      `assignments.html?programme=${programme}&subject=${encodeURIComponent(sub)}`;
    card.innerHTML = `<h3>${sub}</h3>`;
    grid.appendChild(card);
  });
}

/* ========= PROGRAMME SWITCH ========= */
if (programme === "MA") {
  renderSubjects(maSubjects);
  return;
}

if (programme === "MSC") {
  renderSubjects(mscSubjects);
  return;
}

/* ========= FREE PROGRAMMES (BA / BSC / DIPLOMA) ========= */
const subjects = [...new Set(
  assignments
    .filter(a => a.level && a.level.toUpperCase() === programme)
    .map(a => a.programme.trim())
)];

if (subjects.length === 0) {
  grid.innerHTML =
    "<p style='text-align:center;color:#777;'>No subjects found</p>";
} else {
  renderSubjects(subjects);
}
</script>

</body>
</html>
